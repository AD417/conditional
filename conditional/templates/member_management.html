{% extends "nav.html" %} {% block body %}
<div class="container main">
    {% if is_eval_director %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Administration</h3>
        </div>
        <div class="panel-body">
            <div class="container-fluid">
                <div class="col-xs-6 col-sm-2">
                    <div class="stat-number">{{num_current}}</div>
                    <div class="stat-title">Current Students</div>
                </div>
                 <div class="col-xs-6 col-sm-2">
                    <div class="stat-number">{{num_active}}</div>
                    <div class="stat-title">Active Members</div>
                </div>
                 <div class="col-xs-6 col-sm-2">
                    <div class="stat-number">{{num_onfloor}}</div>
                    <div class="stat-title">On-Floor Members</div>
                </div>
                 <div class="col-xs-6 col-sm-2">
                    <div class="stat-number">{{num_fresh}}</div>
                    <div class="stat-title">Intro Accounts</div>
                </div>
                <div class="col-xs-12 col-sm-4 align-center">
                    <div class="material-switch">
                        <div class="switch-label">Site Lockdown</div>
                        <input type="checkbox" id="site-lockdown-checkbox" name="site-lockdown-checkbox" 
                        {% if site_lockdown %} 
                            checked 
                        {% endif %}>
                        <label for="site-lockdown-checkbox" class="label-primary"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% if is_eval_director %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Add Users</h3>
        </div>
        <div class="panel-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6 remove-padding">
                        <form action="/manage/uploaduser" id="upload_user" class="dropzone" data-module="dropzone">
                            <div class="dz-message">
                                <img src="../images/user_upload.svg" width="72px">
                                <div class="upload-title">Mass User Upload</div>
                                <div class="upload-sub">Drag file here or click to upload.</div>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-6 member-form">
                        <form>
                            <div class="form-group">
                                <label class="control-label" for="name">Member Name</label>
                                <input class="form-control" id="name" name="name" type="text">
                                <span class="material-input"></span>
                            </div>
                            <div class="col-xs-8 remove-padding">
                                <div class="form-group">
                                    <label class="control-label" for="room">Room Number</label>
                                    <input class="form-control" id="roome" name="room" type="text">
                                    <span class="material-input"></span>
                                </div>
                            </div>
                            <div class="col-xs-4 onfloor-box">
                                <div class="form-group">
                                    <label>
                                    <input id="onfloor" name="onfloor" type="checkbox">
                                    On-Floor</label>
                                </div>
                            </div>
                            <button class= "btn btn-raised btn-primary user-submit" id="submit" type="submit">Create New User</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% if is_eval_director %}
    {% if freshmen|length == 0 %}
    <div class="alert alert-info" role="alert"><span class="glyphicon glyphicon-info-sign white" style="padding-right:5px"> </span> There are currently no freshmen accounts.</div>
    {% else %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Freshmen Management</h3>
        </div>
        <div class="panel-body table-fill">
            <div class="table-responsive">
                <table class="table table-striped no-bottom-margin" data-module="table" data-searchable="true" data-sort-column="0" data-sort-order="asc" data-length-changable="true"{% if freshmen|length < 11 %} data-paginated="false" {% endif %}>
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>On Floor</th>
                        <th>Room</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for f in freshmen %}
                    <tr>
                        <td>{{f['name']}}</td>
                        <td>
                            {% if f['onfloor'] %} &#10003; {% endif %}
                        </td>
                        <td>{{f['room']}}</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endif %}
    {% endif %}

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Member Management</h3>
        </div>
        <div class="panel-body table-fill">
            <div class="table-responsive">
                <table class="table table-striped no-bottom-margin" data-module="table" data-searchable="true" data-sort-column="0" data-sort-order="asc" data-length-changable="true">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Active</th>
                            <th>On Floor</th>
                            <th>Room</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for m in active %}
                        <tr>
                            <td>
                                <img class="table-img mobile-hide" src="https://profiles.csh.rit.edu/image/{{m['uid']}}"> <a href="#" data-module="editUser" data-modal="editUserModal" data-uid="{{m['uid']}}">{{m['name']}}</a>
                            </td>
                            <td>
                                {% if m['active'] %} &#x2605; {% endif %}
                            </td>
                            <td>
                                {% if m['onfloor'] %} &#10003; {% endif %}
                            </td>
                            <td>{{m['room']}}</td>
                            <td>{{m['hp']}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserTitle" aria-hidden="true">
    <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span>

                    </button>
                    <h4 class="modal-title" id="editUserTitle">Edit User</h4>
                </div>
                <div class="modal-body">
                    <div class="row user-edit-row">
                        <div class="col-xs-8">
                            <label class="control-label" for="memberName">Member Name</label>
                            <input class="form-control" id="memberName" name="name" type="text">
                            <span class="material-input"></span>
                        </div>
                        <div class="col-xs-4">
                            <label class="control-label" for="room">Room</label>
                            <input class="form-control" id="room" name="room" type="text">
                            <span class="material-input"></span>
                        </div>
                    </div>

                    <div class="row user-edit-row">
                        <div class="col-xs-4">
                            <div class="form-group align-center">
                                <label>
                                    <input name="onfloor" type="checkbox">
                                    On-Floor
                                </label>
                            </div>
                        </div>
                        <div class="col-xs-4">
                            <div class="form-group align-center">
                                <label>
                                    <input name="dues" type="checkbox">
                                    Paid Dues
                                </label>
                            </div>
                        </div>
                        <div class="col-xs-4">
                            <div class="form-group align-center">
                                <label for="points">Points:</label> <input class="form-control input-sm hp-input" id="points" type="number">
                            </div>
                        </div>
                    </div>

                    <p class="lead">Missed House Meetings</p>
                    <div class="alert alert-info" role="alert" id="noMissedHmAlert"><span class="glyphicon glyphicon-info-sign white" style="padding-right:5px"> </span> This member has not missed any house meetings.</div>
                    <div class="row hm-wrapper" id="missedHmTpl">
                        <div class="col-xs-4">
                            <h6 class="hm-date">07/31/2016</h6>
                        </div>
                        <div class="col-xs-4">
                            <div class="form-group align-center">
                                <label>
                                    <input name="hm-excused" type="checkbox">
                                    Excused
                                </label>
                            </div>
                        </div>
                        <div class="col-xs-4">
                            <button type="button" class="btn btn-outline-secondary btn-sm hm-present-btn" id="markPresentBtn">
                            <span class="glyphicon glyphicon-ok green" style="padding-right:5px"></span>Mark Present
                            </button>
                        </div>
                        <div class="col-xs-12">
                            <div class="form-group align-center">
                                <input class="form-control hm-reason" placeholder="Reason" id="reason" type="text">
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="editSaveBtn">Save</button>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
